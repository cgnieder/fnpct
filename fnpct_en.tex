% --------------------------------------------------------------------------
% the FNPCT package
% 
%   footnote kerning
% 
% 2012/06/07
% --------------------------------------------------------------------------
% Clemens Niederberger
% Web:    https://bitbucket.org/cgnieder/fnpct/
% E-Mail: contact@mychemistry.eu
% --------------------------------------------------------------------------
% Copyright 2012 Clemens Niederberger
% 
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
% 
% This work has the LPPL maintenance status `maintained'.
% 
% The Current Maintainer of this work is Clemens Niederberger.
% --------------------------------------------------------------------------
% If you have any ideas, questions, suggestions or bugs to report, please
% feel free to contact me.
% --------------------------------------------------------------------------
% the package is inspired by the following question on TeX.SE:
%   http://tex.stackexchange.com/q/56094/5049
% --------------------------------------------------------------------------
% if you want to compile this documentation you'll need the document class
% `cnpkgdoc' which you can get here:
%    https://bitbucket.org/cgnieder/cnpkgdoc/
%    the class is licensed LPPL 1.3 or later
\RequirePackage{sepfootnotes}
\documentclass[toc=index,toc=bib]{cnpkgdoc}
\docsetup{
  pkg      = fnpct ,
  code-box = {
    skipbelow = .5\baselineskip ,
    skipabove = .5\baselineskip ,
  }
}
\addcmds{
  AdaptNote,
  AdaptNoteMark,
  anote,
  anotecontent,
  arabic,
  DeclareNewFootnote,
  endnote,
  footnoteB,
  kfc,
  kfp,
  multendnote,
  multfootcite,
  multfootnote,
  multparnote,
  multsidenote,
  myfn,
  newfootnotes,
  parnote,
  parnotes,
  setfnpct,
  sidenote,
  theendnotes,
  thempfootnote,
  writeinnernotes
}
\setfnpct{multiple,add-punct-marks=:[0pt][-.05em]}
\usepackage{endnotes}
\usepackage{parnotes}

\newfootnotes{a}

\renewcommand\thempfootnote{\arabic{mpfootnote}}

\usepackage[backend=biber,style=alphabetic]{biblatex}
\addbibresource{biblatex-examples.bib}
\addbibresource{\jobname.bib}

% rudimentary solution for a `maintainer' field:
\DeclareFieldFormat{authortype}{\mkbibparens{#1}}
\renewbibmacro*{author}{%
  \ifboolexpr{
    test \ifuseauthor
    and
    not test {\ifnameundef{author}}
  }
    {\printnames{author}%
     \iffieldundef{authortype}
       {}
       {\setunit{\space}%
	\usebibmacro{authorstrg}}}
    {}}

\begin{filecontents}{\jobname.bib}
@software{bigfoot,
  title   = {bigfoot},
  author  = {David Kastrup},
  date    = {2006/07/15},
  version = {1.25},
  url     = {http://www.ctan.org/pkg/bigfoot}
}
@software{endnotes,
  title   = {endnotes},
  author  = {Robin Fairbairns},
  authortype = {current maintainer},
  date    = {2012/01/15},
  url     = {http://www.ctan.org/pkg/endnotes}
}
@software{fixfoot,
  title   = {fixfoot},
  author  = {Robin Fairbairns},
  date    = {2007/12/12},
  version = {0.3a} ,
  url     = {http://www.ctan.org/pkg/fixfoot}
}
@software{footmisc,
  title   = {footmisc},
  author  = {Robin Fairbairns},
  date    = {2011/06/06},
  version = {5.5b},
  url     = {http://www.ctan.org/pkg/footmisc}
}
@software{footnote,
  title   = {footnote},
  author  = {Mark Wooding},
  date    = {1997/01/28},
  version = {1.13},
  url     = {http://www.ctan.org/pkg/footnote}
}
@software{manyfoot,
  title   = {manyfoot},
  author  = {Alexander I. Rozhenko},
  date    = {2005/09/11},
  version = {1.10},
  url     = {http://www.ctan.org/pkg/manyfoot}
}
@software{parnotes,
  title   = {parnotes},
  author  = {Micheal Hughes},
  date    = {2012/03/01},
  version = {1},
  url     = {http://www.ctan.org/pkg/parnotes}
}
@software{pagenote,
  title   = {pagenote},
  author  = {Will Robertson},
  authortype = {current maintainer},
  date    = {2009/09/03},
  version = {1.1a},
  url     = {http://www.ctan.org/pkg/pagenote}
}
@software{sepfootnotes,
  title   = {sepfootnotes},
  author  = {Eduardo C. Louren\c{c}o de Lima},
  date    = {2012/03/06},
  version = {0.1},
  url     = {http://www.ctan.org/pkg/sepfootnotes}
}
@software{sidenotes,
  title   = {sidenotes},
  author  = {Andy Thomas},
  date    = {2011/11/10},
  version = {0.80},
  url     = {http://www.ctan.org/pkg/sidenotes}
}
@software{tablefootnote,
  title   = {tablefootnote},
  author  = {H.-Martin M\"{u}nch},
  date    = {2012/01/14},
  version = {1.0g},
  url     = {http://www.ctan.org/pkg/tablefootnote}
}
@software{yafoot,
  title   = {yafoot},
  author  = {Hiroshi Nakashima},
  date    = {1999/07/14},
  version = {1.0},
  url     = {http://www.ctan.org/pkg/yafoot}
}
\end{filecontents}

\AdaptNoteOpt\footcite\multfootcite

\begin{filecontents}{\jobname.ist}
 heading_prefix "{\\bfseries "
 heading_suffix "\\hfil}\\nopagebreak\n"
 headings_flag  1
 delim_0 "\\dotfill "
 delim_1 "\\dotfill "
 delim_2 "\\dotfill "
 delim_r "\\textendash"
 suffix_2p "\\nohyperpage{\\,f.}"
 suffix_3p "\\nohyperpage{\\,ff.}"
\end{filecontents}

\newcommand\setapart[1]{%
  \begin{quote}
   #1
  \end{quote}}
\let\verb\lstinline

\TitlePicture{\parbox{.75\textwidth}{The \fnpct package basically does two things
to footnotes: if footnote marks are followed by a punctuation mark the order
of footnote and punctuation mark is reversed and the kerning gets adjusted. As a
side effect a new method of creating multiple footnotes and some other features are
provided.}}

\makeindex
\begin{document}

\section{License and Requirements}
\fnpct is placed under the terms of the LaTeX Project Public License,
version 1.3 or later (\url{http://www.latex-project.org/lppl.txt}).
It has the status ``maintained.''

\fnpct depends on the \paket*{l3kernel}, \paket*{xparse}, \paket*{l3keys2e} and
\paket*{scrlfile}.

\section{What's it all about?}
\subsection{Basics}\secidx{basics}
The \fnpct package basically does two things to footnotes: if footnote marks are
followed by a comma or a full stop\footnote{More punctuation marks can be added
through a package option.} the order of footnote and punctuation mark is
reversed and the kerning gets adjusted. As a side effect a new method of creating
multiple footnotes\footnote{like;this} is provided, see section \ref{sec:multiple}
for details.

In what way is the kerning adjusted? After being placed behind the punctuation
mark the footnote mark is moved a little bit back, namely by the amount specified
with the option \key{after-punct-space} (see section \ref{sec:options}). If the
footnote mark follows a word \emph{without} being followed by a punctuation%
\footnote{Well, it does not necessarily have to follow a \emph{word}. The important
point is \emph{not being followed} by a punctuation mark.}, there (obviously) is
no order switching and a little space is inserted before the footnote mark, namely
the amount specified by the option \key{before-footnote-space} (see section
\ref{sec:options}).

All examples in this documentation use

\setapart{\cmd{renewcommand}\cmd{thempfootnote}{\cmd{arabic}{mpfootnote}}.}

Now, let's see some action:
\begin{beispiel}
 \begin{minipage}{.4\linewidth}
  \noindent The three little pigs built their houses
  out of straw\footnote{not to be confused with hay},
  sticks\footnote{or lumber according to some sources}
  and bricks\footnote{probably fired clay bricks}.
 \end{minipage}
\end{beispiel}

To ensure that the kerning is set the right way the footnote \emph{must} be placed
\emph{before} the full stop or the comma. \emph{The command can look ahead but not look back}.
This means if you place the \cmd{footnote} command after a full stop or a comma it is
treated as if following a word, \ie a thin space is inserted: effectively the opposite 
of the desired behaviour.

The order-switching can be prevented using a package option since not all countries
and languages have the same typographic conventions. In this case the full stop
and the comma are move a bit back.

\bigskip\hfil
\begin{minipage}{.25\linewidth}
\setlength\parindent{0pt}%
without \fnpct:\\
{\setfnpct{dont-mess-around}%
\null\quad text.\footnotemark[1]\\
\null\quad text\footnotemark[1]}.

with \fnpct:\\
\null\quad text\footnotemark[1].\\
\setfnpct{punct-after}%
\null\quad text\footnotemark[1].
\end{minipage}\hfil

\begin{beschreibung}
 \option{punct-after}{\default{true}/false} when \code{true} the punctuation sign
 will be placed \emph{after} the footnote.
\end{beschreibung}
Like all options it can also be set using the setup command.
\begin{beschreibung}
 \befehl{setfnpct}{<options>} set up options. Can be used anywhere in the document.
 Some options can only be set in the preamble, though.
\end{beschreibung}
\begin{beispiel}
 \setfnpct{punct-after}
 \begin{minipage}{.4\linewidth}
  \noindent The three little pigs built their houses
  out of straw\footnote{not to be confused with hay},
  sticks\footnote{or lumber according to some sources}
  and bricks\footnote{probably fired clay bricks}.
 \end{minipage}
\end{beispiel}
\secidx*{basics}

\subsection{Temporarily disable or enable switching}\secidx{disable switching}
One maybe want to put some footnote marks \emph{before} the punctuation and some
after, for example because the first one describes a single word but the second
one a whole sentence. For this purpose \fnpct adds a \code{*} argument to \cmd{footnote}
and \cmd{footnotemark}. The complete new syntax now is as follows:
\begin{beschreibung}
 \Befehl{footnote}*[<num>]{<footnote text>}\code{<tpunct>} \cnpkgdocarrow\ new
 \code{*} argument added. \code{<tpunct>} is the optional trailing punctuation
 mark.
 \Befehl{footnotemark}*[<num>]\code{<tpunct>} \cnpkgdocarrow\ new \code{*} argument
 added. \code{<tpunct>} is the optional trailing punctuation mark.
\end{beschreibung}
The \code{*} argument temporarily turns off the punctuation/footnote switching.
In case you set \key{punct-after}{true} the \code{*} argument temporarily
\emph{enables} the switching.
\begin{beispiel}
 \begin{minipage}{.4\linewidth}
  \noindent The three little pigs built their houses
  out of straw\footnote*{not to be confused with hay},
  sticks\footnote{or lumber according to some sources}
  and bricks\footnote{probably fired clay bricks}.
 \end{minipage}\hfil
 \setfnpct{punct-after}
 \begin{minipage}{.4\linewidth}
  \noindent The three little pigs built their houses
  out of straw\footnote*{not to be confused with hay},
  sticks\footnote{or lumber according to some sources}
  and bricks\footnote{probably fired clay bricks}.
 \end{minipage}
\end{beispiel}
\secidx*{disable switching}

\section{Options}\secidx{options}\label{sec:options}
Most package options are listed below. They all can be set as a package option or
with the \cmd{setfnpct} command. Most of them are for adjusting the kerning.

\default{Underlined} values are set if the option is used without value.
\begin{beschreibung}
 \option{add-punct-marks}{<mark>[<space after>][<space before>]} add another punctuation
 mark for the position switching and spacify kerning if necessary. An existing entry
 will be overwritten. This option accepts list of marks.
 %
 \option{remove-punct-marks}{<mark>} remove punctuation mark from the kerning/position
 switching behaviour. This option accepts a list of marks.
 %
 \option{after-dot-space}{<dim>} space to be inserted after a footnote mark and
 before the full stop (``footnote \emph{after} dot''). A negative space
 will move the full stop further to the footnote mark. Default = \code{-.06em}
 %
 \option{after-comma-space}{<dim>} space to be inserted after a footnote mark and
 before the comma (``footnote \emph{after} comma''). A negative space
 will move the comma further to the footnote mark.  Default = \code{-.06em}
 %
 \option{after-punct-space}{<dim>} set \emph{all} spaces, \ie also the ones for
 marks you've added with \key{add-punct-marks}.
 %
 \option{punct-after}{\default{true}/false} when \code{true} the punctuation sign
 will be placed \emph{after} the footnote Default = \code{false}.
 %
 \option{before-dot-space}{<dim>} space to be inserted after a footnote mark and
 before the full stop (``footnote \emph{before} dot''), \ie with
 \key{punct-after}{true}. Default = \code{-.15em}
 %
 \option{before-comma-space}{<dim>} space to be inserted after a footnote mark and
 before the comma (``footnote \emph{before} comma''), \ie with
 \key{punct-after}{true}. Default = \code{-.15em}
 %
 \option{before-punct-space}{<dim>} set \emph{all} spaces, \ie also the ones for
 marks you've added with \key{add-punct-marks}.
 %
 \option{before-footnote-space}{<dim>} space to be inserted between a word and
 the following footnote mark. Default = \code{.06em}
 %
 \option{dont-mess-around} sets all mentioned lengths to \code{0pt} and
 \key{punct-after}{true}. Basically this is as if you hadn't loaded \fnpct except
 the multiple footnote commands and \cmd{innernote} are still available, see
 sections \ref{sec:multiple} and \ref{sec:nested}, respectively.
 %
 \option{multiple}{\default{true}/false} lets \cmd{footnote} be equal to
 \cmd{multfootnote}. Default = \code{false}
 %
 \option{mult-fn-delim}{<delimiter>} sets the delimiter for the \cmd{multfootnote}
 command. Default = \code{;}
 %
 \option{mult-fn-sep}{<separator>} sets the separator between multiple footnote
 marks. Default = \code{,}
 %
 \option{normal-marks}{\default{true}/false} sets the footnote marks in the foot
 not as superscripts but as normal font. If you're not using a \paket[koma-script]{KOMA-Script}
 class this option will load the package \paket*{scrextend}. See section \ref{sec:normal}
 for more information. \emph{This option can only be set in the preamble}. Default
 = \code{false}
\end{beschreibung}

So if you want to extend the punctuation switching and kerning to other punctuation
marks you can do something like this:
\begin{beispiel}
 \setfnpct{add-punct-marks=!?}
 \begin{minipage}{.4\linewidth}
  \noindent The three little pigs built their houses
  out of straw\footnote{not to be confused with hay}?
  Sticks\footnote{or lumber according to some sources}
  and bricks\footnote{probably fired clay bricks}!
 \end{minipage}
\end{beispiel}

Or with some additional spacing:
\begin{beispiel}
 \setfnpct{add-punct-marks=![.03em]?[.03em]}
 \begin{minipage}{.4\linewidth}
  \noindent The three little pigs built their houses
  out of straw\footnote{not to be confused with hay}?
  Sticks\footnote{or lumber according to some sources}
  and bricks\footnote{probably fired clay bricks}!
 \end{minipage}
\end{beispiel}

Let's take a look at an example with some ridiculous settings:
\begin{beispiel}
 % some ridiculous settings:
 \setfnpct{after-punct-space=2pt,before-footnote-space=2pt}
 \begin{minipage}{.4\linewidth}
  \noindent The three little pigs built their houses
  out of straw\footnote{not to be confused with hay},
  sticks\footnote{or lumber according to some sources}
  and bricks\footnote{probably fired clay bricks}.
 \end{minipage}
\end{beispiel}

And now the same with switched order:
\begin{beispiel}
 % some ridiculous settings:
 \setfnpct{punct-after,before-punct-space=2pt,before-footnote-space=2pt}
 \begin{minipage}{.4\linewidth}
  \noindent The three little pigs built their houses
  out of straw\footnote{not to be confused with hay},
  sticks\footnote{or lumber according to some sources}
  and bricks\footnote{probably fired clay bricks}.
 \end{minipage}
\end{beispiel}

In case the automatic kerning doesn't work for whatever reason the spaces are
available as user commands as well:
\begin{beschreibung}
 \befehl{kfp} insert the \key{after-dot-space} or (if \key{punct-after}{true})
 the \key{before-dot-space}.
 \befehl{kfc} insert the \key{after-comma-space} or (if \key{punct-after}{true})
 the \key{before-comma-space}.
\end{beschreibung}

Some of the options are explained in a bit more detail in the next sections.
\secidx*{options}

\section{Multiple footnotes}\secidx{multiple footnotes}\label{sec:multiple}
\subsection{Basics}\secidx[basics]{multiple footnotes}
Since multiple footnotes have to be treated differently\footnote{see these footnotes;for an example},
\fnpct provides an extra command for that:
\begin{beschreibung}
 \Befehl{multfootnote}*{<list>;<of>;<footnotes>}\code{<tpunct>} \cnpkgdocarrow\
 different footnotes are separated with a semicolon. The \code{*} turns the
 footnote/punctuation switching temporarily off.
\end{beschreibung}
\begin{beispiel}
 \begin{minipage}{.4\linewidth}
  \noindent The three little pigs built their houses
  out of straw\footnote{not to be confused with hay},
  sticks\footnote{or lumber according to some sources}
  and bricks\multfootnote{probably fired clay bricks;or
  something else}.
 \end{minipage}
\end{beispiel}

Every of the items of the list has an optional \code{*} argument and an optional
argument equivalent to the optional argument of \cmd{footnotetext}:
\begin{beschreibung}
 \Befehl{multfootnote}{*[<mark>]<footnote text>;...}
\end{beschreibung}
\begin{beispiel}
 \begin{minipage}{.4\linewidth}
  \noindent The three little pigs built their houses
  out of straw\footnote{not to be confused with hay},
  sticks\footnote{or lumber according to some sources}
  and bricks\multfootnote{probably fired clay bricks;[5]or
  something else}.
 \end{minipage}
\end{beispiel}

Additionally every item has an optional \code{*} which only invokes \cmd{footnotetext}.
This enables for example to set nested footnotes\secidx[nested footnotes]{multiple footnotes}
without disrupting the multiple setting. The following example is shown in figure
\ref{fig:nested:mult}:
\begin{beispiel}[code only]
\documentclass{article}
\usepackage[
  paperwidth=.5\textwidth,
  paperheight=12\baselineskip,
  margin=5pt,
  bottom=1.5cm]{geometry}

\usepackage{fnpct}

\begin{document}
  \noindent The three little pigs built their houses
  out of straw\footnote{not to be confused with hay},
  sticks\footnote{or lumber according to some sources}
  and bricks\multfootnote{probably fired clay bricks%
  \footnotemark;*or something else;what do I know}.
\end{document}
\end{beispiel}

\begin{figure}[h]
 \centering
 \fbox{\includegraphics{nested_ex.pdf}}
 \caption{nested footnotes}\label{fig:nested:mult}
\end{figure}

\newpage
\subsection{The delimiter and separator}\secidx[delimiter]{multiple footnotes}\secidx[separator]{multiple footnotes}
Since the semicolon might be part of the footnote text you might have some trouble.
But there are ways around. Maybe try enclosing it in braces:
\begin{beispiel}
 \begin{minipage}{.4\linewidth}
  \noindent The three little pigs built their houses
  out of straw\footnote{not to be confused with hay},
  sticks\footnote{or lumber according to some sources}
  and bricks\multfootnote{probably fired clay bricks{;}
  or something else;what do I know}.
 \end{minipage}
\end{beispiel}

There also are options which lets you choose the (input) delimiter and the (output)
separator:
\begin{beschreibung}
 \option{mult-fn-delim}{<delimiter>} choose delimiter for the \cmd{multfootnote}.
 Default = \code{;}
 \option{mult-fn-sep}{<separator>} choose the separator that is put between footnote
 marks. Default = \code{,}
\end{beschreibung}
\begin{beispiel}
 \setfnpct{mult-fn-delim=//,mult-fn-sep=;}
 \begin{minipage}[t]{.4\linewidth}
  \noindent The three little pigs built their houses
  out of straw\footnote{not to be confused with hay},
  sticks\footnote{or lumber according to some sources}
  and bricks\multfootnote{probably fired clay bricks;
  or something else//what do I know}.
 \end{minipage}\hfil
 \setfnpct{mult-fn-delim=;,mult-fn-sep=}
 \renewcommand*\thempfootnote{\fnsymbol{mpfootnote}}
 \begin{minipage}[t]{.4\linewidth}
  \noindent The three little pigs built their houses
  out of straw\footnote{not to be confused with hay},
  sticks\footnote{or lumber according to some sources}
  and bricks\multfootnote{probably fired clay bricks;
  or something else}.
 \end{minipage}
\end{beispiel}

\subsection{Automagic}\secidx[automagic]{multiple footnotes}
If you want you can turn all footnotes into \cmd{multfootnote}s.
\begin{beschreibung}
 \option{multiple}{\default{true}/false} let \cmd{footnote} behave like \cmd{multfootnote}.
 \emph{This option can only be set in the preamble}. Default = \code{false}
\end{beschreibung}
\begin{beispiel}
 % in preamble: \setfnpct{multiple}
 % or \usepackage[multiple]{fnpct}
 \begin{minipage}{.4\linewidth}
  \noindent The three little pigs built their houses
  out of straw\footnote{not to be confused with hay},
  sticks\footnote{or lumber according to some sources}
  and bricks\footnote{probably fired clay bricks;or
  something else}.
 \end{minipage}
\end{beispiel}
\secidx*{multiple footnotes}

\section{Nested Footnotes}\secidx{nested footnotes}\label{sec:nested}
\fnpct provides some support for nested footnotes. There are some restrictions,
though. The command below can be used inside \cmd{footnote} and \cmd{multfootnote},
but not inside another \cmd{innernote}:
\begin{beschreibung}
 \Befehl{innernote}*[<mark>]{<text>}\code{<tpunct>} \cnpkgdocarrow\ a nested footnote.
\end{beschreibung}
The inner node uses a \cmd{footnotemark} internally and the mark will be set with
the definition it has at begin document.

The output of the following code can be seen in figure \ref{fig:nested:a}.
\begin{beispiel}[code only]
\documentclass{article}
\usepackage[
  paperwidth=.5\textwidth,
  paperheight=12\baselineskip,
  margin=5pt,
  bottom=1.5cm]{geometry}

\usepackage{fnpct}

\begin{document}
  \noindent The three little pigs built their houses
  out of straw\footnote{not to be confused with hay},
  sticks\footnote{or lumber according to some sources}
  and bricks\footnote{probably fired clay bricks%
  \innernote{or not}}.
\end{document}
\end{beispiel}

\begin{figure}[h]
 \centering
 \fbox{\includegraphics{nested_ex_a.pdf}}
 \caption{\cmd{innernote} example (a)}\label{fig:nested:a}
\end{figure}

This is especially useful if you have more than one additional footnote inside a
footnote, a case that can't be solved in a satisfying (\ie automatic) way with the
method mentioned in section \ref{sec:multiple}. See figure \ref{fig:nested:b} for
the output of this code:
\begin{beispiel}[code only]
\documentclass{article}
\usepackage[
  paperwidth=.5\textwidth,
  paperheight=12\baselineskip,
  margin=5pt,
  bottom=1.5cm]{geometry}

\usepackage{fnpct}

\begin{document}
  \noindent The three little pigs built their houses
  out of straw\footnote{not to be confused with hay},
  sticks\footnote{or lumber according to some sources}
  and bricks\footnote{probably\innernote{just guessing}
  fired clay bricks\innernote{or not}}.
\end{document}
\end{beispiel}

\begin{figure}[h]
 \centering
 \fbox{\includegraphics{nested_ex_b.pdf}}
 \caption{\cmd{innernote} example (b)}\label{fig:nested:b}
\end{figure}

\cmd{innernote} can also be used to escape minipages. In this case use
\cmd{innernote} as a replacement for \cmd{footnote} and call this command
later:
\begin{beschreibung}
 \befehl{writeinnernotes} writes all \cmd{footnotetext}s to the inner footnotes
 when invoked. This is usually done automatically by the \cmd{footnote} command
 but there are possible needs for it.
\end{beschreibung}
See figure \ref{fig:nested:c} for the output of the following code:
\begin{beispiel}[code only]
\documentclass{article}
\usepackage[
  paperwidth=.5\textwidth,
  paperheight=12\baselineskip,
  margin=5pt,
  bottom=1.5cm]{geometry}

\usepackage{fnpct}

\begin{document}
\noindent\fbox{%
\begin{minipage}{.9\linewidth}
 The three little pigs built their houses
 out of straw\innernote{not to be confused with hay},
 sticks\innernote{or lumber according to some sources}
 and bricks\innernote{probably}.
\end{minipage}}\writeinnernotes
  
\end{document}
\end{beispiel}
\begin{figure}[h]
 \centering
 \fbox{\includegraphics{nested_ex_c.pdf}}
 \caption{\cmd{innernote} example (c)}\label{fig:nested:c}
\end{figure}
\secidx*{nested footnotes}

\section{Normal notes}\secidx{normal notes}\label{sec:normal}
The package option \key{normal-marks} (see p.\,\pageref{key:normal-marks}) changes
the layout of the footnote marks in the foot by using \paket[koma-script]{KOMA-Script}'s

\setapart{\cmd{deffootnote}[<mark indent>]{<indent>}\ma{<par indent>}\ma{<format code>}.}

The following code is shown in figure \ref{fig:normal}.
\begin{beispiel}[code only]
\documentclass{article}
\usepackage[
  paperwidth=.5\textwidth,
  paperheight=12\baselineskip,
  margin=5pt,
  bottom=1.5cm]{geometry}

\usepackage[normal-marks]{fnpct}

\begin{document}

\noindent The three little pigs built their houses
out of straw\footnote{not to be confused with hay},
sticks\footnote{or lumber according to some sources}
and bricks\footnote{probably fired clay bricks}.

\end{document}
\end{beispiel}

\begin{figure}[h]
 \centering
 \fbox{\includegraphics{normal_ex.pdf}}
 \caption{Demonstration of the \key{normal-marks} option.}
 \label{fig:normal}
\end{figure}

The three indent values used by \fnpct can be changed with the following options:
\begin{beschreibung}
 \option{normal-mark-width}{<dim>} The width of the box within which the marks are
 set. Default = \code{1em}
 \option{normal-indent}{<dim>} The indent of each footnote line \emph{except} the
 first. Default = \code{1.5em}
 \option{normal-par-indent}{<dim>} Additional indent of a new paragraph inside the
 footnote text. Default = \code{1em}
\end{beschreibung}
\secidx*{normal notes}

\section{Other packages}\secidx{other packages}\label{sec:other:packages}
\fnpct tries its best to support other footnote and related packages\footnote{If
you find some package missing please let me know.}. Each of the following subsections
is dedicated to one of these packages and if and how they work together with \fnpct.
Fortunately most of them do quite well.

\subsection{bigfoot}\label{ssec:bigfoot}\secidx[bigfoot]{other packages}
The \paket{bigfoot} \cite{bigfoot} package extends the possibilities of the
\paket{manyfoot} package \cite{manyfoot}, see section \ref{ssec:manyfoot}. The main
feature is to use different classes of footnotes which are typeset in different
apparatus on the bottom of the page.

\fnpct is compatible with \paket{bigfoot}. You need to be a bit cautious, though.
You need to

\setapart{declare footnotes with \cmd{DeclareNewFootnote} \emph{after} loading \fnpct
 but in the document \emph{preamble}.}

\emph{Also verbatim material won't work inside footnotes anymore}. Since \fnpct
does not redefine any \cmd{footnotetext} like command it will still work inside
one of them.

For every footnote class defined with \cmd{DeclareNewFootnote} the commands
\cmd{footnote<class>} and \cmd{footnotemark<class>} are redefined with the starred
variant and a \cmd{multfootnote<class>} is defined. The \key{multiple} option
will turn all \cmd{footnote<class>} commands into the corresponding
\cmd{multfootnote<class>}.

\fnpct has an additional package option which \emph{cannot} be set with \cmd{setfnpct}
and only has any effects if \paket{bigfoot} has been loaded:
\begin{beschreibung}
 \option{bigfoot-default-top}{\default{true}/false} sets the \code{default} footnote
 class as top layer. Default = \code{false}
\end{beschreibung}

Since this document cannot easily combine \emph{every} footnote package at the same
time for demonstration purposes the following code is shown in figure \ref{fig:bigfoot}:
\begin{beispiel}[code only]
\documentclass{article}
\usepackage[
  paperwidth=.5\textwidth,
  paperheight=12\baselineskip,
  margin=5pt,
  bottom=1.5cm]{geometry}

\usepackage{bigfoot}
\usepackage[bigfoot-default-top]{fnpct}
\setfnpct{multiple}
\DeclareNewFootnote[para]{B}[alph]

\begin{document}

\noindent The three little pigs built their houses
out of straw\footnote*{not to be confused with hay%
\footnoteB{let alone grass}}, sticks\footnote{or
lumber according to some sources} and bricks%
\footnote{probably fired clay bricks;or something}.

\end{document}
\end{beispiel}

\begin{figure}[h]
 \centering
 \fbox{\includegraphics{bigfoot_ex.pdf}}
 \caption{\paket*{bigfoot} example}
 \label{fig:bigfoot}
\end{figure}

\subsection{endnotes}\secidx[endnotes]{other packages}
The \paket{endnotes} \cite{endnotes} package povides the commands \cmd{endnote}
and \cmd{endnotemark} which can be used to output all notes at the end of a chapter,
say.

If the package is loaded both commands are adapted\footnote*{see section \ref{sec:adapt}
on manual adaption}:
\begin{beispiel}[code only]
 % `fnpct' does this for you:
 \AdaptNote\endnote\multendnote
 \AdaptNoteMark\endnotemark
\end{beispiel}

Everything else stays the same:
\begin{beispiel}
 \begin{minipage}[t]{.4\linewidth}
  \noindent The three little pigs built their houses
  out of straw\endnote{not to be confused with hay},
  sticks\endnote{or lumber according to some sources}
  and bricks\endnote{probably fired clay bricks}.
  
  \theendnotes
 \end{minipage}\hfil
 \begin{minipage}[t]{.4\linewidth}
  \noindent The three little pigs built their houses
  out of straw\endnote*{not to be confused with hay},
  sticks\endnote{or lumber according to some sources}
  and bricks\multendnote{probably fired clay bricks;or
  something else}.
  
  \theendnotes
 \end{minipage}
\end{beispiel}

\subsection{fixfoot}\secidx[fixfoot]{other packages}
The \paket{fixfoot} \cite{fixfoot} package provides a possibility to create repeating
footnotes. \fnpct supports this package provided you take care of the following:

\setapart{Use \cmd{DeclareFixedFootnote} only in the preamble but \emph{after} loading
 \fnpct.}

\cmd{DeclareFixedFootnote}{\cmd{cs}}\ma{<footnote text>} is used to store the
\ma{<footnote text>} in \cmd{cs} and create a footnote mark for it but don't
repeat the footnote text on the same page in the bottom. The document needs
several runs to get all the numbers and footnotes right.

Every fixed footnote declared with \cmd{DeclareFixedFootnote} gets an optional
\code{*} to prevent the punctuation switching. \emph{There is \emph{no} mult-variant
of the fixed notes!}

Since this document cannot easily combine \emph{every} footnote package at the same
time for demonstration purposes the following code is shown in figure \ref{fig:fixfoot}:
\begin{beispiel}[code only]
\documentclass{article}
\usepackage[
  paperwidth=.55\textwidth,
  paperheight=12\baselineskip,
  margin=5pt,
  bottom=1.5cm]{geometry}
  
\usepackage{fixfoot}
\usepackage{fnpct}

\DeclareFixedFootnote{\myfn}{I'm confused: what do I want to say?}

\begin{document}

\noindent The three little pigs\myfn\ built their houses
out of straw\myfn*, sticks\footnote{or lumber according
to some sources} and bricks\footnote{probably fired clay
bricks}.

\end{document}
\end{beispiel}

\begin{figure}[h]
 \centering
 \fbox{\includegraphics{fixfoot_ex.pdf}}
 \caption{\paket*{fixfoot} example}
 \label{fig:fixfoot}
\end{figure}

\subsection{footmisc}\label{ssec:manyfoot}\secidx[footmisc]{other packages}
The \paket{footmisc} package \cite{footmisc} provides a range of options to customize
footnotes, for example output them as margin notes or count footnotes per page.

Testing showed no incompatibilities with \paket{footmisc}. The only thing is that
you won't have to use its \code{multiple} option.

\subsection{footnote}\secidx[footnote]{other packages}
Unfortunately \fnpct is not compatible with the \paket{footnote} package \cite{footnote}.
Or more precisely it is not compatible if the command pair \cmd{savenotes}/\cmd{spewnotes}
is invoked. This disables \paket{footnote}'s environments as well as its environment
escaping mechanism through \cmd{makesavenoteenv}.

\subsection{manyfoot}\secidx[manyfoot]{other packages}
The \paket{manyfoot} package \cite{manyfoot} is not and will not directly be
supported. It is loaded by \paket{bigfoot} (see section \ref{ssec:bigfoot}), anyway.
And since the latter states in its documentation
\begin{zitat}[David Kastrup \textup{\cite{bigfoot}}]
 Purpose of this package is to provide a one-stop solution to almost all problems
 related to footnotes. You can use it as a drop-in replacement of the `\paket{manyfoot}'
 package, but without many of its shortcomings, and quite a few features of its
 own.
\end{zitat}
you should probably prefer it anyway.

If it is \emph{really} wanted by users I might change my opinion, though \ldots

\subsection{pagenote}\secidx[pagenote]{other packages}
The package \paket{pagenote} \cite{pagenote} is supported and its \cmd{pagenote}
command is treated the same way as all other note commands: it got an optional
\code{*} argument and an additional \cmd{multpagenote} is defined.

\subsection{parnotes}\secidx[parnotes]{other packages}
The \paket{parnotes} package \cite{parnotes} does something similar to the \paket{endnotes}
package. basically it allows to output the footnote text after a paragraph, either
by using a special environment or by invoking \cmd{parnotes}.

If \paket{parnotes} is loaded \fnpct extends its functionality analogous
to the one of \paket{endnotes}.

Again the \key{multiple} option turns all \cmd{parnote}s into \cmd{multparnote}s.
\begin{beispiel}
 \begin{minipage}[t]{.4\linewidth}
  \noindent The three little pigs built their houses
  out of straw\parnote{not to be confused with hay},
  sticks\parnote{or lumber according to some sources}
  and bricks\parnote{probably fired clay bricks}.
  
  \parnotes
 \end{minipage}\hfil
 \begin{minipage}[t]{.4\linewidth}
  \noindent The three little pigs built their houses
  out of straw\parnote*{not to be confused with hay},
  sticks\parnote{or lumber according to some sources}
  and bricks\multparnote{probably fired clay bricks;or
  something else}.
  
  \parnotes
 \end{minipage}
\end{beispiel}

\subsection{sepfootnotes}\secidx[sepfootnotes]{other packages}
\fnpct supports the \paket{sepfootnotes} package \cite{sepfootnotes}. Each note
type you have created with with one of the commands
\begin{description}
 \item \cmd{newfootnotes}{<prefix>},
 \item \cmd{newendnotes}{<prefix>} or
 \item \cmd{newsymbolfootnotes}{<prefix>}
\end{description}
gets the additional optional \code{*} to prevent punctuation switching. Also the
corresponding mult-variant \cmd{<prefix>multnote} is defined. The option \key{multiple}
again turns all note commands into their mult-variant.

You have to use the \cmd{newfootnotes} commands in the document preamble after
loading \fnpct.

\begin{beispiel}
 % preamble \newfootnotes{a}
 \anotecontent{first}{not to be confused with hay}
 \anotecontent{second}{or lumber according to some sources}
 \anotecontent{third}{probably fired clay bricks}
 \begin{minipage}{.4\linewidth}
  \noindent The three little pigs built their houses
  out of straw\anote{first}, sticks\anote{second} and
  bricks\anote{third}.
 \end{minipage}
\end{beispiel}

\subsection{sidenotes}\secidx[sidenotes]{other packages}
The package \paket{sidenotes} \cite{sidenotes} is supported and its commands
\cmd{sidenote}, \cmd{sidenotemark} and \cmd{sidecite} are treated the same way
as footnotes: they got an optional \code{*} argument and the additional
\cmd{multsidenote} and \cmd{multsidecite} are created. The option \key{multiple}
turns all note commands into their mult-variant.

\subsection{tablefootnote}\secidx[tablefootnote]{other packages}
The package \paket{tablefootnote} \cite{tablefootnote} is supported and its
\cmd{tablefootnote} command is treated the same way as all other note commands:
it got an optional \code{*} argument and an additional \cmd{multtablefootnote}
is defined. The option \key{multiple} turns all note commands into their mult-variant.

\subsection{yafoot}\secidx[yafoot bundle]{other packages}
Currently no issues are known when using \fnpct with one or all of the packages
of the \paket{yafoot} \cite{yafoot} bundle. Just for reference: these packages are
\paket*{pfnote}, \paket*{fnpos} and \paket*{dblfnote}.
\secidx*{other packages}

\section{Adapting note commands}\secidx{adapting notes}\label{sec:adapt}
If a package is not natively supported you can try and adapt commands yourself.
You'll need to use one of the following commands. Please be aware that if the
adapted command does not match the required syntax it will get the required syntax
afterwards. This can result in dummy arguments or an overwritten \code{*} argument.

\begin{beschreibung}
 % \AdaptNote
 \Befehl{AdaptNote}{\cmd{cs}}\ma{\cmd{multcs}} \cnpkgdocarrow\ this lets \cmd{cs}  adapt to
 the kerning behaviour and adds an optional \code{*}. It also creates a
 corresponding mult-variant. The package option \key{multiple} will now turn
 \cmd{cs} into its mult-variant. Required syntax: \cmd{cs}[<oarg>]{<marg>}
 % \AdaptNoteNoMult
 \Befehl{AdaptNoteNoMult}{\cmd{cs}} \cnpkgdocarrow\ like \cmd{AdaptNote} but doesn't create a
 mult-variant and thus there is no change in behaviour when the option \key{multiple}
 is used. Required syntax: \cmd{cs}[<oarg>]{<marg>}
 % \AdaptNoteOpt
 \Befehl{AdaptNoteOpt}{\cmd{cs}}\ma{\cmd{multcs}} \cnpkgdocarrow\ this lets \cmd{cs}
 adapt to the kerning behaviour and adds an optional \code{*}. It also creates a
 corresponding mult-variant. The package option \key{multiple} will now turn
 \cmd{cs} into its mult-variant. Required syntax: \cmd{cs}[<oarg>]\oa{<oarg>}\ma{<marg>}
 % \AdaptNoteOptNoMult
 \Befehl{AdaptNoteOptNoMult}{\cmd{cs}} \cnpkgdocarrow\ like \cmd{AdaptNoteOpt} but
 doesn't create a mult-variant and thus there is no change in behaviour when the
 option \key{multiple} is used. Required syntax: \cmd{cs}[<oarg>]\oa{<oarg>}\ma{<marg>}
 % \AdaptNoteMark
 \Befehl{AdaptNoteMark}{\cmd{cs}} \cnpkgdocarrow\ this lets \cmd{cs} adapt to the
 kerning behaviour and adds an optional \code{*}. Required syntax: \cmd{cs}[<oarg>]
 % strict
 \option{strict}{\default{true}/false} when \code{true} \cmd{AdaptNote} (and the
 othe two) will issue errors if the note command in wuestion has already been
 adapted. Default = \code{false}
\end{beschreibung}

\subsection{tufte-latex's side notes}\secidx[tufte-latex]{adapting notes}
For example using the \cmd{sidenote} command from the \paket[tufte-latex]{tufte-handout}
class is easily possible, see also figure \ref{fig:tufte}:
\begin{beispiel}[code only]
\documentclass{tufte-handout}
\usepackage[multiple]{fnpct}
\AdaptNote\sidenote\multsidenote
\begin{document}
Some text in the document body\sidenote{Some
text in a sidenote.;A second sidenote.}.
\end{document}
\end{beispiel}

\begin{figure}[h]
 \centering
 \fbox{\includegraphics[trim=2.5cm 24.5cm 2cm 1cm,scale=.75]{tufte_ex.pdf}}
 \caption{Adapt {tufte-latex}.}
 \label{fig:tufte}
\end{figure}

\subsection{Adapting \code{\textbackslash\textcolor{code}{footcite}} and siblings}
\secidx[biblatex]{adapting notes}\label{ssec:adapt:footcite}
If you're willing to sacrifice \cmd{footcite}'s \code{*} argument (which it has
in some styles) you can adapt the commands provided by \paket{biblatex} as well:

\begin{beispiel}
 % used in preamble: \AdaptNoteOpt\footcite\multfootcite
 \begin{minipage}{.5\linewidth}
  \noindent The three little pigs built their houses
  out of straw\footnote{not to be confused with hay},
  sticks\footnote{or lumber according to some sources}
  and bricks\footnote{probably fired clay bricks}. The
  companion has nothing on this topic\multfootcite{[see]
  [but there's nothing there]companion;[or see][but there's
  also nothing]knuth:ct:a}.
 \end{minipage}
\end{beispiel}

The option \key{multiple} turns all \cmd{footcite}s into \cmd{multfootcite}s now.
Remember that the optional arguments then are inside the braces!

\begin{beispiel}
 % used in preamble: \AdaptNoteOpt\footcite\multfootcite
 % with option `multiple':
 \begin{minipage}{.5\linewidth}
  \noindent The three little pigs built their houses
  out of straw\footnote{not to be confused with hay},
  sticks\footnote{or lumber according to some sources}
  and bricks\footnote{probably fired clay bricks}. The
  companion has nothing on this topic\footcite{[see][but
  there's nothing there]companion;[or see][but there's also
  nothing]knuth:ct:a}.
 \end{minipage}
\end{beispiel}
\secidx*{adapting notes}

\appendix
\printbibliography

\setindexpreamble{Section titles are indicated \textbf{bold}, packages
\textsf{sans serif}, commands \code{\textbackslash\textcolor{code}{brown}}
 and options \textcolor{key}{\code{green}}\par\bigskip}

\printindex
\end{document}